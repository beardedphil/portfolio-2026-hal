---
description: Supabase-backed Kanban — ALWAYS update tickets in the DB first, then run sync (all agents)
alwaysApply: true
---

# Ticket Source of Truth: Supabase Only (All Agents)

We use a **Supabase-backed Kanban** in **Supabase-only mode** (0065). Ticket state (content, column, position) lives in the database. The app and agents **do not read from `docs/tickets/*.md`** — tickets are fetched directly from Supabase.

- **Do not create or edit ticket files** under `docs/tickets/` directly. The app does not read these files (Supabase-only mode).
- **To create or change a ticket (any agent):** update **Supabase directly**:
  - **Create / update body:** Use the HAL PM agent (create_ticket / update_ticket_body) or a script that writes to the `tickets` table. The Kanban UI reflects changes within the polling interval (~10s).
  - **Move ticket column (e.g. QA → Human in the Loop):** Update the DB directly. Use `node scripts/move-ticket-column.js <ticketId> <columnId>` from the repo root (e.g. `node scripts/move-ticket-column.js 0047 col-human-in-the-loop`). The script updates Supabase directly.
- **`sync-tickets.js` is migration-only (0065):** The script no longer writes to `docs/tickets/*.md`. It can be used for one-time migration of existing files to Supabase (Docs→DB only).
- **Never commit `.env`** (it must remain ignored).
