---
description: PM agent instructions; HAL API usage; move ticket to Ready for QA
alwaysApply: true
---

# Agent Instructions (Local)

Instructions are loaded from `.cursor/rules` and `docs/`. See `docs/process/hal-tool-call-contract.mdc` for HAL API endpoints.

## Moving Tickets After Implementation

**MANDATORY:** After implementation, the implementation agent **MUST** move the ticket to **Ready for QA** before sending a completion summary.

**Move ticket to Ready for QA:**
```javascript
const baseUrl = (await readFile('.hal/api-base-url', 'utf8')).trim()
const res = await fetch(`${baseUrl}/api/tickets/move`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ ticketId: '0167', columnId: 'col-qa' }),
})
const result = await res.json()
if (!result.success) throw new Error(`Failed: ${result.error}`)
```

**When to move:**
1. After all code changes are committed and pushed
2. After all 8 required artifacts are stored (plan, worklog, changed-files, decisions, verification, pm-review, git-diff, instructions-used)
3. **Before** sending completion summary

**If move returns `missingArtifacts`:** Store each via `POST /api/artifacts/insert-implementation`, then retry move.

**Column IDs:** `col-unassigned`, `col-todo`, `col-doing`, `col-qa`, `col-human-in-the-loop`, `col-process-review`, `col-done`, `col-wont-implement`.
