---
description: HAL instruction-loading entry point for all agents
alwaysApply: true
---

# Agent Instructions Entry Point

This local file is an entry point only. It is not the source of truth for instruction content.

## Source of Truth

Agent instructions live in Supabase and must be retrieved through HAL API endpoints.

## Required Loading Flow

1. **Load global bootstrap instructions (all agents):**
   - `POST /api/instructions/get`
   - Body: `{ repoFullName?: string, agentType: "all", includeBasic: true, includeSituational: false }`
   - Purpose: global instructions shared by all agents, including how to request more instructions.

2. **Load full instruction set for your agent type:**
   - `get_instruction_set({ agentType: "<agent-type>" })`
   - Agent types: `project-manager`, `implementation-agent`, `qa-agent`, `process-review-agent`
   - Purpose: all core instructions for that agent, plus additional on-demand topics.

3. **Load specific topics only when needed:**
   - `get_instruction_set({ topicId: "<topic-id>" })`
   - or `POST /api/instructions/get-topic`

## HAL Endpoints

- **Get instructions:** `POST /api/instructions/get`
  - Body: `{ repoFullName?: string, agentType?: string, includeBasic?: boolean, includeSituational?: boolean }`
- **Get specific topic:** `POST /api/instructions/get-topic`
  - Body: `{ topicId: string, repoFullName?: string }`
- **Get instruction index:** `POST /api/instructions/get-index`
  - Body: `{ repoFullName?: string }`

If HAL/Supabase is unavailable, instruction sets are not considered loaded.
