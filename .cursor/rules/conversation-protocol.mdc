---
description: Conversation protocol (one question when input needed)
alwaysApply: true
---

# Conversation Protocol

- You may do as much work as needed per message.
- When you need user input, you may ask **at most one** question in that message.
- Do not bundle multiple questions; spread them across messages.
- When the user provides a new agent rule, record it in `.cursor/rules/` at the workspace root (not inside individual project folders).
- After updating any rule file(s), explicitly state **which** `.cursor/rules/*.mdc` file(s) were updated.
- **When starting a ticket:** your **ABSOLUTE FIRST action** (before reading the ticket, before any file edits, before creating a branch) is to:
  1. **MANDATORY: Read existing artifacts first** - This is non-negotiable. See **auditability-and-traceability**: Implementation Agent: First Step.
     - Read `.hal/api-base-url` and call `POST ${baseUrl}/api/artifacts/get` with `{ ticketId: "<ticket-id>" }`
     - **CRITICAL:** Check for QA reports with FAIL verdicts - read them completely to understand what went wrong
     - **CRITICAL:** Check for Human in the Loop failures in QA reports - read them completely to understand what failed in user testing
     - Review all existing implementation artifacts to understand previous work
     - **DO NOT skip this step** - Tickets often fail QA multiple times or fail Human in the Loop validation, and you must understand the failure context
  2. Run `git status -sb` and create/checkout `ticket/<id>-<short-title-kebab>` if not already on it. FORBIDDEN: editing files on `main`. See **change-ownership-and-staging-discipline**: FIRST.
- **When you have finished a feature/task** (implementation + audit): before sending any summary or "done" message, follow **done-means-pushed**: run `git add`, `git commit`, `git push`, then include `git status -sb` in your reply. Do not delegate commit/push to the user.
