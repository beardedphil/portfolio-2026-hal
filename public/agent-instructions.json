{
  "index": {
    "basic": [],
    "situational": {},
    "topics": {}
  },
  "instructions": [
    {
      "path": "agent-instructions.mdc",
      "name": "agent instructions",
      "description": "How to access agent instructions via HAL API",
      "alwaysApply": true,
      "content": "# Agent Instructions\n\nAgent instructions are stored in Supabase and accessed via HAL API endpoints. This file is an entry point to the instruction system.\n\n## Accessing Instructions\n\n### For Agents\n\nAgents should access instructions via HAL API endpoints (preferred) or directly from Supabase (fallback).\n\n**HAL API Endpoints:**\n\n- **Get all instructions:** `POST /api/instructions/get`\n  - Body: `{ repoFullName?: string, agentType?: string, includeBasic?: boolean, includeSituational?: boolean }`\n  - Returns: List of instructions filtered by agent type and instruction type\n\n- **Get specific topic:** `POST /api/instructions/get-topic`\n  - Body: `{ topicId: string, repoFullName?: string }`\n  - Returns: Full instruction content for a specific topic (used by `get_instruction_set` tool)\n\n- **Get instruction index:** `POST /api/instructions/get-index`\n  - Body: `{ repoFullName?: string }`\n  - Returns: Instruction index metadata with available topics\n\n**Example (get basic instructions):**\n```javascript\nconst baseUrl = (await readFile('.hal/api-base-url', 'utf8')).trim()\nconst res = await fetch(`${baseUrl}/api/instructions/get`, {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    agentType: 'project-manager',\n    includeBasic: true,\n    includeSituational: false,\n  }),\n})\nconst result = await res.json()\nif (result.success) {\n  // result.instructions contains the basic instructions\n}\n```\n\n**Example (get specific topic):**\n```javascript\nconst res = await fetch(`${baseUrl}/api/instructions/get-topic`, {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    topicId: 'auditability-and-traceability',\n  }),\n})\nconst result = await res.json()\nif (result.success) {\n  // result.content contains the full instruction content\n}\n```\n\n### Instruction Structure\n\nInstructions are organized into:\n\n1. **Basic Instructions** - Always loaded for all agents (minimal core instructions)\n2. **Situational Instructions** - Available on-demand via `get_instruction_set` tool\n\n### For Users\n\nUsers can browse and edit instructions in the HAL app:\n- Click \"Agent Instructions\" button in the header\n- Browse the instruction hierarchy (All Agents → Agent → Instruction)\n- Click \"Edit\" to modify instructions (saves directly to Supabase)\n\n### Instruction Storage\n\n- **Storage:** Supabase `agent_instructions` and `agent_instruction_index` tables\n- **Editing:** Via HAL app UI (writes to Supabase)\n- **Access:** Via HAL API endpoints (no direct Supabase access needed)\n\nSee `.cursor/rules/agent-supabase-api-paradigm.mdc` for full API endpoint documentation.\n",
      "agentTypes": [
        "all",
        "project-manager"
      ],
      "topicId": "agent-instructions",
      "isBasic": false,
      "isSituational": false
    }
  ],
  "basic": [],
  "situational": []
}